#
# CHEF MANAGED FILE: DO NOT EDIT
# Generated by Chef for <%= node['hostname'] %>
# Controlling Cookbook: afterdark-webhead
#

<%
if @ssl
  listen_opts = '443 ssl'
else
  listen_opts = '80'
end
-%>
server {
  listen <%= listen_opts -%> default_server;
  server_name <%= node['afterdark-webhead']['server-name'] %>;

<% if @ssl -%>
  ssl_certificate     <%= @ssl_cert -%>;
  ssl_certificate_key <%= @ssl_key -%>;
  ssl_protocols       TLSv1 TLSv1.1 TLSv1.2;
  ssl_ciphers         HIGH:!aNULL:!MD5;

<% end -%>
  location / {
    root <%= node['afterdark-webhead']['content-path'] %>;
    index  index.html;
  }
}
